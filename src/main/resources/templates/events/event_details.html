<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">
<head>
<meta charset=utf-8 />
 <title>Event</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox.js/v3.3.0/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.3.0/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; left:50%; bottom:0; width:50%; height:100% }
  
  .mapboxgl-popup {
  max-width: 200px;
}

.mapboxgl-popup-content {
  text-align: center;
  font-family: 'Open Sans', sans-serif;
}
</style>
</head>
<body>
<div layout:fragment="content">
    <h1 th:text="${event.name}"> Text</h1>
     <blockquote>
      <p > <b>Venue: </b></p>
          <p>
            <a th:href="@{/venues/{num}(num=${event.venue.id})}" th:text="${event.venue.name}">My Event</a>
          </p>

       <p > <b>Date: </b></p>
      <p th:text="${event.date}"></p>
      <p></p>
      <p > <b>Time: </b></p>
      <p th:text="${event.time}"></p>

      <p > <b>Summary: </b></p>
      <p th:text="${event.summary}"></p>
      <p></p>
      <p > <b> Description: </b></p>
      <p th:text="${event.description}"></p>
    </blockquote>
    
    <a class="btn btn-primary" role="button" th:href="@{/events}"><i class="fas fa-arrow-left" aria-hidden="true"></i> Back</a>
    
    <br><br>
    <div class="form-group">
      <form th:action="@{/events/delete/{num}(num=${id})}" th:method="delete">
      <button type="submit" class="btn btn-primary"><i class="fas fa-trash" aria-hidden="true"></i> Delete</button>
      </form>
    </div>
    

<div id='map'></div>

<script th:inline="javascript">
/*<![CDATA[*/

var lat = /*[[${lat}]]*/ 0;
var lon = /*[[${lon}]]*/ 0;
var name = /*[[${event.name}]]*/ 'NO name';
L.mapbox.accessToken = 'pk.eyJ1IjoiZXZlbnRsaXRlaDAyIiwiYSI6ImNrOG44NjNrNTBrZGMzbW9jbGRqc3kxbXQifQ.H2MJkZCOBTT-X9_noMmreA';
var map = L.mapbox.map('map')
    .setView([lat, lon], 6)
    .addLayer(L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11'));

// L.marker is a low-level marker constructor in Leaflet.

//var popup = L.popup()
//	.setContent('<p>Hello world!<br />This is a nice popup.</p>');

var popup = L.popup()
	.setContent('<p>'+name+'</p>');

var marker = L.marker([lat, lon], {
             icon: L.mapbox.marker.icon({
             'marker-size': 'large',
             'marker-symbol': 'bar',
             'marker-color': '#fa0'
    })
}).bindPopup(popup).addTo(map);


/*]]>*/
</script>

  </div>
</body>
</html>